<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>創世紀 2048</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- 音效 -->
    <audio id="bg-music" loop><source src="audio/bgm.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-click"><source src="audio/click.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-merge"><source src="audio/merge.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-skill"><source src="audio/explode.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-win"><source src="audio/win.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-fail"><source src="audio/fail.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-time"><source src="audio/time.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-wave"><source src="audio/wave.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-thunder"><source src="audio/thunder.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-tornado"><source src="audio/tornado.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-frozen"><source src="audio/frozen.mp3" type="audio/mpeg"></audio>

    <div id="game-scale-wrapper">
        <div id="game-container">
            
            <!-- 全域 UI -->
            <div id="global-icons" class="lobby-icons">
                <button id="btn-open-achievement" class="icon-btn hover-effect">
                    <img src="images/01_lobby/achieve.png" alt="成就">
                </button>
                <button id="btn-open-intro" class="icon-btn hover-effect">
                    <img src="images/01_lobby/question.png" onerror="this.src='images/01_lobby/help.png'" alt="說明">
                </button>
                <button id="btn-open-help" class="icon-btn hover-effect">
                    <img src="images/01_lobby/help.png" alt="圖鑑">
                </button>
                <button id="btn-toggle-sound" class="icon-btn hover-effect">
                    <img id="img-sound" src="images/01_lobby/btn_sound_on.png" alt="聲音">
                </button>
            </div>

            <!-- 1. 大廳 -->
            <div id="start-screen" class="screen active">
                <div class="full-bg" style="background-image: url('images/01_lobby/logo_bg.png');"></div>
                <div class="lobby-logo">
                    <img src="images/01_lobby/logoanim.png" alt="Logo">
                </div>
                <div class="lobby-buttons">
                    <button id="btn-endless" class="img-btn hover-effect">
                        <img src="images/01_lobby/btn_start.png">
                    </button>
                    <button id="btn-normal" class="img-btn hover-effect">
                        <img src="images/01_lobby/btn_challenge.png">
                    </button>
                </div>
            </div>

            <!-- 1.5 關卡選擇 -->
            <div id="level-select-screen" class="screen">
                <div class="full-bg" style="background-image: url('images/01_lobby/logo_bg.png'); filter: brightness(0.5);"></div>
                <div class="level-popup">
                    <img src="images/05_level/lvl_select.png" class="level-bg">
                    <button id="btn-close-level" class="close-btn hover-effect" style="top: 20px; right: 20px;">
                        <img src="images/02_achievement/btn_close.png">
                    </button>
                    <div class="level-grid-container" id="level-grid-container"></div>
                </div>
            </div>

            <!-- 2. 遊戲中 -->
            <div id="game-screen" class="screen">
                <div class="full-bg" style="background-image: url('images/04_game/game_bg.jpg');"></div>
                
                <button id="btn-back-home-top" class="top-left-back hover-effect">
                    <img src="images/01_lobby/back.png" onerror="this.src='images/04_game/menu.png'">
                </button>

                <div class="game-layout-inner">
                    <div class="playfield-area">
                        <div class="playfield-bg">
                            <div class="grid-container" id="grid-container"></div>
                            <div id="fx-layer"></div>
                        </div>
                    </div>

                    <div class="sidebar-area">
                        <div class="god-wrapper">
                            <!-- 對話框 -->
                            <div id="god-dialog" class="god-dialog hidden"></div>
                            <div class="god-container">
                                <img src="images/04_game/mission.png" id="god-character">
                            </div>
                        </div>
                        
                        <div class="info-group">
                            <div class="stat-box" style="background-image: url('images/04_game/action_step.png');">
                                <span id="moves-display">∞</span>
                            </div>
                            <div class="stat-box" style="background-image: url('images/04_game/score.png');">
                                <span id="score-display">0</span>
                                <div id="score-effect" class="score-effect"></div>
                            </div>
                        </div>

                        <div class="skills-wrapper">
                            <div class="bottom-skills-grid">
                                <button class="skill-btn hover-effect" id="skill-undo">
                                    <img src="images/04_game/hourglass.png">
                                    <span class="skill-cost">-300</span>
                                    <div id="cd-undo" class="cooldown-mask hidden"></div>
                                </button>
                                <button class="skill-btn hover-effect" id="skill-wave">
                                    <img src="images/04_game/wave.png">
                                    <span class="skill-cost">-500</span>
                                </button>
                                <button class="skill-btn hover-effect" id="skill-volcano">
                                    <img src="images/04_game/explode.png">
                                    <span class="skill-cost">-500</span>
                                </button>
                                <button class="skill-btn hover-effect" id="skill-lightning">
                                    <img src="images/04_game/lightning.png">
                                    <span class="skill-cost">-1000</span>
                                </button>
                                <button class="skill-btn hover-effect" id="skill-typhoon">
                                    <img src="images/04_game/typhoon.png">
                                    <span class="skill-cost">-1000</span>
                                </button>
                                <button class="skill-btn hover-effect" id="skill-ice">
                                    <img src="images/04_game/ice.png">
                                    <span class="skill-cost red-cost">-2000</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. 成就彈窗 -->
            <div id="modal-achievement" class="modal-overlay hidden">
                <div class="popup-container" style="width: 817px; height: 556px;">
                    <img src="images/02_achievement/rank_bg.png" class="popup-bg">
                    <button id="btn-close-achievement" class="close-btn hover-effect">
                        <img src="images/02_achievement/btn_close.png">
                    </button>
                    <div class="achievement-list" id="achievement-list-container"></div>
                </div>
            </div>

            <!-- 4. 演化圖鑑 -->
            <div id="modal-help" class="modal-overlay hidden">
                <div class="book-container">
                    <img src="images/03_evolution/ach_img.png" class="book-bg">
                    <div class="page-left"><div id="evo-grid-left" class="book-grid-layout"></div></div>
                    <div class="page-right"><div id="evo-grid-right" class="book-grid-layout"></div></div>
                </div>
            </div>
            
            <!-- 玩法說明 -->
            <div id="modal-intro" class="modal-overlay hidden">
                <div class="popup-container" style="width: 817px; height: 556px;">
                    <img src="images/question/question_bg.png" class="popup-bg" onerror="this.src='images/02_achievement/rank_bg.png'">
                    <button id="btn-close-intro" class="close-btn hover-effect">
                        <img src="images/02_achievement/btn_close.png">
                    </button>
                </div>
            </div>

            <!-- 目標彈窗 -->
            <div id="modal-target" class="modal-overlay hidden">
                <div class="overlay-dimmer"></div>
                <div class="popup-container" style="width: 425px; height: 410px;">
                    <img src="images/07_target/lvl_target.png" class="popup-bg" onerror="this.src='images/02_achievement/ach_bg.png'">
                    <div class="target-content-centered">
                        <div class="target-icon-box">
                            <img id="target-img" class="bounce-anim" src="images/03_evolution/n1024.png">
                        </div>
                        <div class="modal-btn-group" style="margin-top: 30px; position: relative; bottom: auto;">
                            <button id="btn-target-menu" class="popup-btn hover-effect">
                                <img src="images/04_game/menu.png">
                            </button>
                            <button id="btn-target-start" class="popup-btn hover-effect">
                                <img src="images/04_game/next.png">
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 5. 遊戲通關 -->
            <div id="modal-complete" class="modal-overlay hidden">
                <div id="confetti-container"></div>
                <div class="modal-content-small">
                    <img src="images/08_clear/lvl_complete_back.png" class="modal-bg-layer">
                    <div class="complete-creature-box">
                        <img id="complete-creature" src="images/03_evolution/n2.png">
                    </div>
                    <div class="modal-btn-group">
                        <button id="btn-comp-menu" class="popup-btn hover-effect"><img src="images/04_game/menu.png"></button>
                        <button id="btn-comp-retry" class="popup-btn hover-effect"><img src="images/06_fail/btn_replay.png"></button>
                        <button id="btn-comp-next" class="popup-btn hover-effect"><img src="images/04_game/next.png"></button>
                    </div>
                </div>
            </div>

            <!-- 6. 遊戲失敗 -->
            <div id="modal-gameover" class="modal-overlay hidden">
                <div class="overlay-dimmer"></div>
                <div class="fail-anim-bg">
                    <img src="images/04_game/alien_fail/alien_fail1.png" class="alien-fail-anim">
                </div>
                <div class="modal-content-small fail-window">
                    <img src="images/06_fail/lvl_failed.png" class="modal-bg-layer">
                    <div class="modal-btn-group">
                        <button id="btn-fail-menu" class="popup-btn hover-effect"><img src="images/04_game/menu.png"></button>
                        <button id="btn-fail-retry" class="popup-btn hover-effect"><img src="images/06_fail/btn_replay.png"></button>
                    </div>
                </div>
            </div>
        </div> 
    </div>

    <script src="script.js"></script>
</body>
</html>